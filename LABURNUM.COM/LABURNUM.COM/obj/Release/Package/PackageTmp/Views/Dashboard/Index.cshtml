@model DTO.LABURNUM.COM.DashBoardModel

<div class="row">
    <div class="col-md-12">
        <!--breadcrumbs start -->
        <ul class="breadcrumb">
            <li><a href="@LABURNUM.COM.Component.Constants.URL.WEBSITEURLWITHOUTSLASH/Dashboard/Index"><i class="fa fa-home"></i>Home</a></li>
            <li class="active">Dashboard</li>
        </ul>
        <!--breadcrumbs end -->
    </div>
</div>
<section class="panel panel-body">
    <div class="row">
        @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.PARENT) || new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.STUDENT))
        {
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    <i class="fa fa-envelope fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <span>Morning :</span>
                    @if (Model.StudentDashBoardModel.IsPresentInMorning)
                    {<span>Present</span> }
                    else
                    {<span>Absent</span>}
                    <span>Evening :</span>
                    @if (Model.StudentDashBoardModel.IsPresentAfterLunch)
                    {<span>Present</span> }
                    else
                    {<span>Absent</span>}
                </div>
            </div>
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    <div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="button_home button_green dashboard_clock">

                    <div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="button_home button_voilet dashboard_clock">

                    <i class="fa fa-clock-o fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <div id="Date"></div>
                    <div>
                        <b id="hours"></b>
                        <b id="point">:</b>
                        <b id="min"></b>
                        <b id="point">:</b>
                        <b id="sec"></b>
                    </div>
                </div>
            </div>
            <div class="col-md-8 extra_margin_small">
                <section class="panel">
                    <header class="panel-heading">
                        Today Home Work
            @*<span class="tools pull-right">
                <button type="button" onclick="DownloadRecord('Home Work Details');" class="btn btn-primary adept-view">Download <i class="fa fa-download" aria-hidden="true"></i></button>
            </span>*@
                    </header>
                    <div class="panel-body">
                        @if (@Model.StudentDashBoardModel.HomeWorkList.Count == 0)
                        {
                            <div class="table-responsive">
                                No Home Work Assigned For Today
                            </div>}
                        else
                        {
                            <div class="table-responsive">
                                <table class="table table-hover general-table responsive">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Faculty Name</th>
                                            <th>Subject</th>
                                            <th>HomeWork Details</th>
                                            @*<th>Assigned Date</th>*@
                                            <th>Attachment</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{int counter = 1;}
                                        @foreach (DTO.LABURNUM.COM.HomeWorkModel item in @Model.StudentDashBoardModel.HomeWorkList)
                                        {
                                            <tr>
                                                <td style="width: 0%;">@counter</td>
                                                <td style="width: 17%;">@item.FacultyName</td>
                                                <td style="width: 12%;">@item.SubjectName</td>
                                                <td style="width: 15%;">@item.HomeWorkText</td>
                                                @*<td style="width: 15%;">@item.CreatedOn.ToShortDateString()</td>*@
                                                @if (item.Attachment != null && item.Attachment != "")
                                                {
                                                    <td style="width: 0%;"><a href="@LABURNUM.COM.Component.Constants.URL.WEBSITEURLWITHOUTSLASH/Uploads/HomeWork/@item.Attachment" target="_blank">Download</a></td>
                                                }
                                                else
                                                {
                                                    <td style="width: 0%;">-</td>
                                                }
                                            </tr>
                                                counter++;
                                        }
                                    </tbody>
                                </table>
                            </div>
                        }
                    </div>
                </section>
            </div>
            <div class="col-md-4 extra_margin_small">
                <section class="panel">
                    <header class="panel-heading">
                        Class Teacher <span class="tools pull-right">
                            <a class="fa fa-chevron-up" href="javascript:;"></a>
                        </span>
                    </header>
                    <div class="panel-body" style="display: none;">
                        <div class="row">
                            <ul>
                                <li>Name : @Model.StudentDashBoardModel.ClassTeacherName</li>
                                <li>Mobile : @Model.StudentDashBoardModel.ClassTeacherMobile</li>
                                <li>Email Id : @Model.StudentDashBoardModel.ClassTeacherEmail</li>
                            </ul>
                        </div>
                    </div>
                </section>
                <section class="panel">
                    <header class="panel-heading">
                        Upcoming Events <span class="tools pull-right">
                            <a class="fa fa-chevron-up" href="javascript:;"></a>
                        </span>
                    </header>
                    <div class="panel-body" style="display: none;">
                        <div class="row">
                            <ul>
                                @if (Model.StudentDashBoardModel.EventList.Count == 0)
                                {
                                    <li>No Upcoming Event</li>}
                                else
                                {

                                    foreach (DTO.LABURNUM.COM.EventModel item in Model.StudentDashBoardModel.EventList)
                                    {
                                    <li>Event Date : @item.EventDate </li>
                                    <li>Event Name : @item.EventName</li>
                                    <li>Event Type : @item.EventTypeText</li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        }


        @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.ACCOUNT))
        {
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    @*<i class="fa fa-envelope fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <span>Morning :</span>
                    @if (Model.StudentDashBoardModel.IsPresentInMorning)
                    {<span>Present</span> }
                    else
                    {<span>Absent</span>}
                    <span>Evening :</span>
                    @if (Model.StudentDashBoardModel.IsPresentAfterLunch)
                    {<span>Present</span> }
                    else
                    {<span>Absent</span>}*@
                </div>
            </div>
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    <div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="button_home button_green dashboard_clock">

                    <div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="button_home button_voilet dashboard_clock">

                    <i class="fa fa-clock-o fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <div id="Date"></div>
                    <div>
                        <b id="hours"></b>
                        <b id="point">:</b>
                        <b id="min"></b>
                        <b id="point">:</b>
                        <b id="sec"></b>
                    </div>
                </div>
            </div>
            <div class="col-md-8 extra_margin_small">
                <section class="panel">
                    <header class="panel-heading">
                        Pending Cheque Details
                    </header>
                    <div class="panel-body">
                        @{long Chequestatus = DTO.LABURNUM.COM.Utility.ChequeStatusMaster.GetChequeStatusMasterId(DTO.LABURNUM.COM.Utility.EnumChequeStatusMaster.SUBMITTED);}
                        @if (@Model.AccountDashBoardModel.StudentFeeDetails.Where(x => x.ChequeStatus == Chequestatus).ToList().Count == 0)
                        {
                            <div class="table-responsive">
                                No Cheque Details Found Whose Status is Pending
                            </div>
                        }
                        else
                        {
                            <div class="table-responsive">
                                <table class="table table-hover general-table responsive">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Class</th>
                                            <th>Section</th>
                                            <th>Student Name</th>
                                            <th>Chq. Date</th>
                                            <th>Amount</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{int counter = 1;}
                                        @foreach (DTO.LABURNUM.COM.StudentFeeDetailModel item in @Model.AccountDashBoardModel.StudentFeeDetails.Where(x => x.ChequeStatus == 3).ToList())
                                        {
                                            <tr>
                                                <td style="width: 0%;">@counter</td>
                                                <td style="width: 17%;">@item.ClassName</td>
                                                <td style="width: 12%;">@item.SectionName</td>
                                                <td style="width: 20%;">@item.StudentName</td>
                                                <td style="width: 15%;">@item.ChequeDate.GetValueOrDefault().Day / @item.ChequeDate.GetValueOrDefault().Month /@item.ChequeDate.GetValueOrDefault().Year</td>
                                                <td style="width: 15%;">@item.ChequePaidAmount</td>
                                                @if (item.ChequeStatus == DTO.LABURNUM.COM.Utility.ChequeStatusMaster.GetChequeStatusMasterId(DTO.LABURNUM.COM.Utility.EnumChequeStatusMaster.SUBMITTED))
                                                {
                                                    <td>
                                                        <button id="btnUpdate" class="btn btn-success adept-view" data-toggle="modal" data-target="#myModal" onclick="UpdateChequeStatusPoupUp('@item.StudentFeeDetailId')">Update Status</button></td> 
                                                }
                                                else
                                                {
                                                    <td>
                                                        <button class="btn btn-success adept-view" disabled>Update Status</button>
                                                    </td> 
                                                }
                                            </tr>
                                                counter++;
                                        }
                                    </tbody>
                                </table>
                            </div>
                        }
                    </div>
                </section>
            </div>
            <div class="col-md-4 extra_margin_small">
                <section class="panel">
                    <header class="panel-heading">
                        Class Teacher <span class="tools pull-right">
                            <a class="fa fa-chevron-up" href="javascript:;"></a>
                        </span>
                    </header>
                    <div class="panel-body" style="display: none;">
                        <div class="row">
                            <ul>
                                <li>Name : </li>
                                <li>Mobile : </li>
                                <li>Email Id : </li>
                            </ul>
                        </div>
                    </div>
                </section>
                <section class="panel">
                    <header class="panel-heading">
                        Upcoming Events <span class="tools pull-right">
                            <a class="fa fa-chevron-up" href="javascript:;"></a>
                        </span>
                    </header>
                    <div class="panel-body" style="display: none;">
                        <div class="row">
                            <ul>
                                @if (Model.StudentDashBoardModel.EventList.Count == 0)
                                {
                                    <li>No Upcoming Event</li>}
                                else
                                {

                                    foreach (DTO.LABURNUM.COM.EventModel item in Model.StudentDashBoardModel.EventList)
                                    {
                                    <li>Event Date : @item.EventDate </li>
                                    <li>Event Name : @item.EventName</li>
                                    <li>Event Type : @item.EventTypeText</li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        }


@* @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.ADMIN))
        {<div class="col-md-3">
            <div class="button_home button_green dashboard_clock">
                <i class="fa fa-envelope fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                <span>Balance SMS :</span>
                <span>
                    @Model.SMSBalance
                </span>
            </div>
        </div>}
        @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.FACULTY))
        {
            if (new LABURNUM.COM.Component.SessionManagement().GetIsClassTeacher())
            {
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    <i class="fa fa-envelope fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <span>Student Present :</span>
                    <span>
                        @Model.PresentStudent
                    </span>
                    <span>Student Absent :</span>
                    <span>
                        @Model.AbsentStudent
                    </span>
                </div>
            </div>
            }
        }
        @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.PARENT) || new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.STUDENT))
        {
            <div class="col-md-3">
                <div class="button_home button_green dashboard_clock">
                    <i class="fa fa-envelope fa-3x" style="float: left; margin: 0px -8px 5px 8px"></i>
                    <span>Status :</span>
                    @if (Model.Status)
                    {<span>Present</span> }
                    else
                    {<span>Absent</span>}
                </div>
            </div>
        }
        @if (new LABURNUM.COM.Component.SessionManagement().GetLoginBy() == DTO.LABURNUM.COM.Utility.UserType.GetValue(DTO.LABURNUM.COM.Utility.EnumUserType.PRINCIPLE))
        {
            <div class="col-md-2">
                <div class="button_home button_green dashboard_clock">

                    <div>
                    </div>
                </div>
            </div>
        }*@
    </div>
</section>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"></div>
<script type="text/javascript">
    $(document).ready(function () {
        OnDashBoardReady();
    });
</script>
